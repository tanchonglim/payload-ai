{"version":3,"sources":["../../../../src/ai/models/openai/generateRichText.ts"],"sourcesContent":["import { openai } from '@ai-sdk/openai'\nimport { jsonSchema, streamObject } from 'ai'\n\nexport const generateRichText = async (text: string, options: any = {}) => {\n  console.log('Running handler with prompts:', options.editorSchema)\n  const streamResult = await streamObject({\n    maxTokens: options.maxTokens || 5000,\n    model: openai(options.model,{\n      structuredOutputs: true,\n    }),\n    onFinish: (result) => {\n      console.log('Finished generating rich text:', { options, rawResponse: result.rawResponse, result })\n    },\n    prompt: text,\n    schema: jsonSchema(options.editorSchema),\n    system: `${options.system}\n\nRULES:\n- Generate original and unique content based on the given topic.\n- Strictly adhere to the specified layout and formatting instructions.\n- Utilize the provided rich text editor tools for appropriate formatting.\n- Ensure the output follows the structure of the sample output object.\n- Produce valid JSON with no undefined or null values.\n\nLAYOUT INSTRUCTIONS:\n${options.layout}\n\nRICH TEXT EDITOR TOOLS:\n- Use appropriate formatting tools such as bold, italic, or underline for emphasis where needed.\n- Apply correct heading levels (h1, h2, h3) for hierarchical structure.\n- Utilize bullet points or numbered lists as required by the layout.\n\nADDITIONAL GUIDELINES:\n- Ensure coherence and logical flow between all sections.\n- Maintain a consistent tone and style throughout the content.\n- Use clear and concise language appropriate for the target audience.\n`,\n  })\n  return streamResult.toTextStreamResponse()\n}\n"],"names":["openai","jsonSchema","streamObject","generateRichText","text","options","console","log","editorSchema","streamResult","maxTokens","model","structuredOutputs","onFinish","result","rawResponse","prompt","schema","system","layout","toTextStreamResponse"],"mappings":"AAAA,SAASA,MAAM,QAAQ,iBAAgB;AACvC,SAASC,UAAU,EAAEC,YAAY,QAAQ,KAAI;AAE7C,OAAO,MAAMC,mBAAmB,OAAOC,MAAcC,UAAe,CAAC,CAAC;IACpEC,QAAQC,GAAG,CAAC,iCAAiCF,QAAQG,YAAY;IACjE,MAAMC,eAAe,MAAMP,aAAa;QACtCQ,WAAWL,QAAQK,SAAS,IAAI;QAChCC,OAAOX,OAAOK,QAAQM,KAAK,EAAC;YAC1BC,mBAAmB;QACrB;QACAC,UAAU,CAACC;YACTR,QAAQC,GAAG,CAAC,kCAAkC;gBAAEF;gBAASU,aAAaD,OAAOC,WAAW;gBAAED;YAAO;QACnG;QACAE,QAAQZ;QACRa,QAAQhB,WAAWI,QAAQG,YAAY;QACvCU,QAAQ,CAAC,EAAEb,QAAQa,MAAM,CAAC;;;;;;;;;;AAU9B,EAAEb,QAAQc,MAAM,CAAC;;;;;;;;;;;AAWjB,CAAC;IACC;IACA,OAAOV,aAAaW,oBAAoB;AAC1C,EAAC"}