{"version":3,"sources":["../../../src/providers/InstructionsProvider/InstructionsProvider.tsx"],"sourcesContent":["'use client'\n\nimport type { Field } from 'payload'\n\nimport { useConfig } from '@payloadcms/ui'\nimport React, { createContext, useEffect, useState } from 'react'\n\nimport { PLUGIN_FETCH_FIELDS_ENDPOINT } from '../../defaults.js'\n\nconst initialContext: {\n  field?: Field\n  instructions: Record<string, any>\n  path?: string\n  schemaPath?: unknown\n} = {\n  field: undefined,\n  instructions: undefined,\n  path: '',\n  schemaPath: '',\n}\n\nexport const InstructionsContext = createContext(initialContext)\n\nexport const InstructionsProvider: React.FC = ({ children }: { children: React.ReactNode }) => {\n  const [instructions, setInstructionsState] = useState({})\n  const config = useConfig()\n\n  if (!config) {\n    return null // or a loading indicator\n  }\n\n  const { routes, serverURL } = config.config\n  const { api } = routes\n\n  // This is here because each field have separate instructions and\n  // their ID is needed to edit them for Drawer\n  useEffect(() => {\n    fetch(`${serverURL}${api}${PLUGIN_FETCH_FIELDS_ENDPOINT}`)\n      .then(async (res) => {\n        await res.json().then((data) => {\n          setInstructionsState(data)\n        })\n      })\n      .catch((err) => {\n        console.error('InstructionsProvider:', err)\n      })\n  }, [])\n\n  return (\n    <InstructionsContext.Provider value={{ instructions }}>{children}</InstructionsContext.Provider>\n  )\n}\n"],"names":["useConfig","React","createContext","useEffect","useState","PLUGIN_FETCH_FIELDS_ENDPOINT","initialContext","field","undefined","instructions","path","schemaPath","InstructionsContext","InstructionsProvider","children","setInstructionsState","config","routes","serverURL","api","fetch","then","res","json","data","catch","err","console","error","Provider","value"],"mappings":"AAAA;;AAIA,SAASA,SAAS,QAAQ,iBAAgB;AAC1C,OAAOC,SAASC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAEjE,SAASC,4BAA4B,QAAQ,oBAAmB;AAEhE,MAAMC,iBAKF;IACFC,OAAOC;IACPC,cAAcD;IACdE,MAAM;IACNC,YAAY;AACd;AAEA,OAAO,MAAMC,oCAAsBV,cAAcI,gBAAe;AAEhE,OAAO,MAAMO,uBAAiC,CAAC,EAAEC,QAAQ,EAAiC;IACxF,MAAM,CAACL,cAAcM,qBAAqB,GAAGX,SAAS,CAAC;IACvD,MAAMY,SAAShB;IAEf,IAAI,CAACgB,QAAQ;QACX,OAAO,KAAK,yBAAyB;;IACvC;IAEA,MAAM,EAAEC,MAAM,EAAEC,SAAS,EAAE,GAAGF,OAAOA,MAAM;IAC3C,MAAM,EAAEG,GAAG,EAAE,GAAGF;IAEhB,iEAAiE;IACjE,6CAA6C;IAC7Cd,UAAU;QACRiB,MAAM,CAAC,EAAEF,UAAU,EAAEC,IAAI,EAAEd,6BAA6B,CAAC,EACtDgB,IAAI,CAAC,OAAOC;YACX,MAAMA,IAAIC,IAAI,GAAGF,IAAI,CAAC,CAACG;gBACrBT,qBAAqBS;YACvB;QACF,GACCC,KAAK,CAAC,CAACC;YACNC,QAAQC,KAAK,CAAC,yBAAyBF;QACzC;IACJ,GAAG,EAAE;IAEL,qBACE,KAACd,oBAAoBiB,QAAQ;QAACC,OAAO;YAAErB;QAAa;kBAAIK;;AAE5D,EAAC"}